window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(r,n){n.dhl_post_label={params:{},init:function(){var e=n.dhl_post_label;e.params=wc_gzd_admin_deutsche_post_label_params,r(document).on("change","#deutsche_post_label_dhl_product",e.onChangeProductId),r(document.body).on("wc_gzd_shipment_label_after_init",e.onInit)},onInit:function(){var e=n.dhl_post_label;0<r("#deutsche_post_label_dhl_product").length&&e.refreshProductData()},refreshProductData:function(){var e=n.dhl_post_label;e.replaceProductData(e.getProductData(e.getProductId())),e.refreshPreview()},refreshPreview:function(){var e=n.dhl_post_label,a=germanized.admin.shipment_label_backbone.backbone,t={},d=r(".wc-gzd-shipment-create-label .col-preview");t.security=e.params.preview_nonce,t.product_id=e.getProductId(),t.action="woocommerce_gzd_dhl_preview_stamp",a.doAjax(t,d,e.onPreviewSuccess)},onPreviewSuccess:function(e){n.dhl_post_label;var a=r(".wc-gzd-dhl-im-product-data .col-preview"),t=r(".wc-gzd-dhl-im-product-data").find(".image-preview");e.preview_url?(a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.find(".stamp-preview").length<=0&&t.append('<img class="stamp-preview" style="display: none;" />'),t.find(".stamp-preview").attr("src",e.preview_url).load(function(){a.unblock(),r(this).show()})):t.html("")},getProductId:function(){return r("#deutsche_post_label_dhl_product").val()},getProductData:function(e){n.dhl_post_label;var a={},t=r("form.wc-gzd-create-shipment-label-form").data("products");return t.hasOwnProperty(e)&&(a=t[e]),a},onChangeProductId:function(){n.dhl_post_label.refreshProductData()},replaceProductData:function(a){n.dhl_post_label;var e=r(".wc-gzd-shipment-create-label").find(".wc-gzd-dhl-im-product-data");e.find(".data-placeholder").html(""),e.find(".data-placeholder").each(function(){var e=r(this).data("replace");a.hasOwnProperty(e)?(r(this).html(a[e]),r(this).show()):r(this).hide()})}},r(document).ready(function(){germanized.admin.dhl_post_label.init()})}(jQuery,window.germanized.admin);